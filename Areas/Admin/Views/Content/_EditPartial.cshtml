@model cleanNETCoreMVC.Models.Content
@using cleanNETCoreMVC.Models;
@using System
<form id="content-form" enctype="multipart/form-data">
    <input type="hidden" name="Id" value="@Model.Id" />
    <div class="mb-4">
        <label asp-for="Category" class="block mb-1 font-semibold">ประเภท</label>
        <select name="Category" class="select select-bordered w-full">
            @foreach (var cat in Enum.GetValues(typeof(ContentCategory)))
            {
                <option value="@Convert.ToInt32(cat)" @(cat.Equals(Model.Category) ? "selected" : "")>@cat</option>
            }
        </select>
    </div>
    <div class="mb-4">
        <label asp-for="Title" class="block mb-1 font-semibold">หัวข้อข่าว</label>
        <input name="Title" class="input input-bordered w-full" value="@Model.Title" />
    </div>
    <div class="mb-4">
        <label asp-for="Body" class="block mb-1 font-semibold">เนื้อหาข่าว</label>
        <textarea name="Body" class="textarea textarea-bordered w-full min-h-[120px]" rows="8">@Model.Body</textarea>
    </div>
    <div class="mb-4">
        <label class="block mb-1 font-semibold">อัปโหลดรูปภาพ</label>
        <input type="file" name="ThumbnailFile" id="ThumbnailFile" class="file-input file-input-bordered w-full max-w-xs" accept="image/*" />
        <div class="mt-2">
            <img id="img-preview" src="@(Model.ThumbnailUrl ?? "#")" alt="Preview" style="max-width:200px; @(string.IsNullOrEmpty(Model.ThumbnailUrl) ? "display:none;" : "")" class="rounded shadow" />
        </div>
        @if (!string.IsNullOrEmpty(Model.ThumbnailUrl)) {
            <input type="hidden" name="CurrentThumbnailUrl" value="@Model.ThumbnailUrl" />
        }
    </div>
    <div class="mb-4">
        <label class="block mb-1 font-semibold">แท็กข่าว</label>
        <input id="tag-input" type="text" class="input input-bordered w-full" placeholder="พิมพ์ tag แล้วกด Enter" autocomplete="off" />
        <div id="tag-badges" class="flex flex-wrap gap-2 mt-2"></div>
        <input type="hidden" name="TagNames" id="TagNames" value="@string.Join(",", Model.ContentTags?.Select(ct => ct.Tag.Name) ?? new List<string>())" />
        <small class="text-gray-400">สามารถเพิ่มได้หลาย tag เช่น ข่าว, เกม, PC, PS5</small>
    </div>
    <div class="flex gap-2 justify-end mt-6">
        <button type="submit" class="btn btn-primary">บันทึก</button>
        <button type="button" class="btn btn-ghost" onclick="document.getElementById('contentModal').close()">ยกเลิก</button>
    </div>
</form>
@section Scripts {
} 